<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="CubeSuger"><title>Docker仓库常用命令 · CubeSuger's blog</title><meta name="description" content="登录1docker login
通过执行docker login命令来输入用户名、密码和邮箱来完成注册和登录。注册成功后，本地用户目录的.dockercfg中将保存着用户认证的信息。
从仓库拉取镜像1docker pull [镜像名]
搜索镜像1docker search [想要搜索的镜像名]
例如"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;margin-bottom: 1.5rem"><h3 title><a href="/">CubeSuger's blog</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/categories">分类</a></li><li><a href="/tags">标签</a></li><li><a href="/about">关于</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h2><a>Docker仓库常用命令</a></h2></div><div class="post-content"><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure>
<p>通过执行<code>docker login</code>命令来输入用户名、密码和邮箱来完成注册和登录。注册成功后，本地用户目录的<code>.dockercfg</code>中将保存着用户认证的信息。</p>
<h3 id="从仓库拉取镜像"><a href="#从仓库拉取镜像" class="headerlink" title="从仓库拉取镜像"></a>从仓库拉取镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull [镜像名]</span><br></pre></td></tr></table></figure>
<h3 id="搜索镜像"><a href="#搜索镜像" class="headerlink" title="搜索镜像"></a>搜索镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search [想要搜索的镜像名]</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\kunta&gt;docker search centos</span><br><span class="line">NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">centos                             The official build of CentOS.                   5605                [OK]             </span><br><span class="line">ansible/centos7-ansible            Ansible on Centos7                              123                                     [OK]</span><br><span class="line">jdeathe/centos-ssh                 OpenSSH / Supervisor / EPEL/IUS/SCL Repos - …   113                                     [OK]</span><br><span class="line">consol/centos-xfce-vnc             Centos container with &quot;headless&quot; VNC session…   99                                      [OK]</span><br><span class="line">centos/mysql-57-centos7            MySQL 5.7 SQL database server                   63                                   </span><br><span class="line">imagine10255/centos6-lnmp-php56    centos6-lnmp-php56                              57                                      [OK]</span><br><span class="line">tutum/centos                       Simple CentOS docker image with SSH access      45                                   </span><br><span class="line">centos/postgresql-96-centos7       PostgreSQL is an advanced Object-Relational …   39                                  </span><br><span class="line">kinogmt/centos-ssh                 CentOS with SSH                                 29</span><br></pre></td></tr></table></figure>
<p>我们可以根据镜像是否为官方提供的依据，分为两类。一种是类似centos这样的基础镜像，称为基础或根镜像。这些镜像是由Docker公司创建、验证、支持、提供的。</p>
<p>另外一种是类似<code>ansible/centos7-ansible</code>这样类型的镜像，它是由其它非官方的用户或组织提供的，一般是通过在基础镜像上添加了某些功能然后再提交发布上来供大家使用。像<code>ansible/centos7-ansible</code>这个镜像，它是由名为<code>ansible</code>这个用户或组织维护的，带有用户名为前缀，表明是某个用户的仓库。</p>
<h3 id="自动创建"><a href="#自动创建" class="headerlink" title="自动创建"></a>自动创建</h3><p>自动创建( Automated Builds)功能对于需要经常升级镜像内程序来说十分方便。有时候，用户创建了镜像，安装了某个软件，如果软件发布新版本则需要手动更新镜像。</p>
<p>而自动创建功能使得用户通过DockerHub指定跟踪个目标网站(目前支持GitHub或BitBucket)上的项目，一旦项目发现新的提交，则自动执行创建。</p>
<p>要配置自动创建，包括如下的步骤:</p>
<ol>
<li>创建并登录Docker Hub, 以及目标网站; *在目标网站中连接帐户到Docker Hub。</li>
<li>在Docker Hub中配置一个 自动创建。</li>
<li>选取一个目标网站中的项目(需要含Dockerfile)和分支。</li>
<li>指定Dockerfile的位置，并提交创建。</li>
</ol>
<p>之后，可以在DockerHub的“自动创建”页面中跟踪每次创建的状态。</p>
<h3 id="创建和使用私有仓库、"><a href="#创建和使用私有仓库、" class="headerlink" title="创建和使用私有仓库、"></a>创建和使用私有仓库、</h3><p>安装Docker后，可以通过官方提供的registry镜像来简单搭建一-套本地私有仓库环境:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 5000:5000 registry</span><br></pre></td></tr></table></figure>
<blockquote>
<p>docker run 命令执行时如果发现本地没有对应的镜像，则会先去拉取镜像再运行。</p>
</blockquote>
<p>默认情况下，会将仓库创建在容器的/tmp/registry目录下。可以通过-v参数来将镜像文件存放在本地的指定路径上。</p>
<p>例如下面的例子将上传的镜像放到/opt/data/registry目录:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 5000:5000 -v /opt/data/registry:/tmp/registry registry</span><br></pre></td></tr></table></figure>
<p>此时，在本地将启动- 个私有仓库服务，监听端口为5000。</p>
<h3 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h3><p>首先在一台服务器机子上搭建好私有仓库，其地址为10.0.2.2:5000。然后再试图从机子上上传和下载镜像。</p>
<p>在本地上查看已有镜像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\kunta&gt;docker images</span><br><span class="line">REPOSITORY                           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hub.c.163.com/kuntang/lingermarket   latest              c7a70a3810cf        23 months ago       418MB</span><br><span class="line">ubuntu2                              16.04               1196ea15dad6        2 years ago         336MB</span><br><span class="line">ubuntu                               latest              1196ea15dad6        2 years ago         336MB</span><br><span class="line">hub.c.163.com/public/ubuntu          16.04-tools         1196ea15dad6        2 years ago         336MB</span><br><span class="line">hub.c.163.com/public/centos          6.7-tools           b2ab0ed558bb        2 years ago         602MB</span><br></pre></td></tr></table></figure>
<p>使用<code>docker tag</code>命令把镜像的仓库标记为私有仓库机子地址（格式为：docker tag IMAGE[:TAG] [REGISTRYHOST/]NAME[:TAG]）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker tag ubuntu2:16.04 10.0.2.2:5000/test</span><br><span class="line">docker images</span><br></pre></td></tr></table></figure>
<p>使用<code>docker push</code>命令上传镜像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 10.0.2.2:5000/test</span><br></pre></td></tr></table></figure>
<p>用<code>curl</code>查看私有仓库的镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://10.0.2.2:5000/v1/search</span><br></pre></td></tr></table></figure>
<p>可以看出镜像已经上次成功。</p>
<p>现在可以到任意一台能访问到10.0.2.2地址的机器去下载这个镜像了:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 10.0.2.2:5000/test</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="更多阅读"><a href="#更多阅读" class="headerlink" title="更多阅读"></a>更多阅读</h2><p>Docker系列文章：</p>
<ol>
<li><a href="https://juejin.im/post/5d8820cae51d453b1e478b91" target="_blank" rel="noopener">Docker中镜像、容器的常用命令</a></li>
<li><a href="https://juejin.im/post/5d9f53d26fb9a04e3142120c" target="_blank" rel="noopener">Docker仓库常用命令</a></li>
<li><a href="https://juejin.im/post/5d9f4f86e51d4577f3534ead" target="_blank" rel="noopener">Docker中容器的网络配置常用命令</a></li>
</ol>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-11-21</span><i class="fa fa-tag"></i><a href="/categories/Docker/" title="Docker" class="tag">Docker </a><a href="/tags/备忘翻阅/" title="备忘翻阅" class="tag">备忘翻阅 </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://kunkuntang.github.io/2019/11/21/Docker仓库常用命令/,CubeSuger's blog,Docker仓库常用命令,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2019/11/21/并发和并行的区别/" title="并发和并行的区别" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2019/11/21/Docker中容器的网络配置常用命令/" title="Docker中容器的网络配置常用命令" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>